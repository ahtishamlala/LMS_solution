<main>
    <!-- page-title-area start -->
    <section class="page-title-area d-flex align-items-end" style="background-image: url(assets/img/page-title-bg/01.jpg);">
        <div class="container">
            <div class="row align-items-end">
                <div class="col-lg-12">
                    <div class="page-title-wrapper mb-50">
                        <h1 class="page-title mb-25">Register</h1>
                        <div class="breadcrumb-list">
                            <ul class="breadcrumb">
                                <li><a href="index.html">Home -</a></li>
                                <li><a href="#">Register</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- page-title-area end -->
    <!-- Registration Form Area start -->
    <section class="contact-form-area pt-150 pb-120 pt-md-100 pt-xs-100 pb-md-70 pb-xs-70">
        <div class="container">
            <div class="row justify-content-center align-items-center">
                <div class="col-lg-6">
                    <div class="contact-form-wrapper text-center mb-30">
                        <h2 class="mb-45">Register</h2>
                        <form id="registerForm" onsubmit="return validateForm()" class="row gx-3 comments-form contact-form">
                            <div class="col-lg-12 mb-30">
                                <input id="firstName" type="text" placeholder="First Name" required>
                            </div>
                            <div class="col-lg-12 mb-30">
                                <input id="lastName" type="text" placeholder="Last Name" required>
                            </div>
                            <div class="col-lg-12 mb-30">
                                <input id="username" type="text" placeholder="Username" required>
                            </div>
                            <div class="col-lg-12 mb-30">
                                <input id="address" type="text" placeholder="Address" required>
                            </div>
                            <div class="col-lg-12 mb-30">
                                <input id="phone" type="tel" placeholder="Phone Number" required>
                            </div>
                            <div class="col-lg-12 mb-30">
                                <input id="email" type="email" placeholder="Email" required>
                            </div>
                            <div class="col-lg-12 mb-30">
                                <input id="password" type="password" placeholder="Password" required>
                            </div>
                            <div class="col-lg-12 mb-30">
                                <input id="rePassword" type="password" placeholder="Re-Password" required>
                            </div>
                        </form>
                        <button id="btn-register" class="theme_btn message_btn mt-20">Register</button>

                        <!-- Login Button below the form -->
                        <div class="mt-4">
                            <a href="login.html" class="btn btn-secondary">Already have an account? Login here</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Registration Form Area end -->
</main>
<script>
    $(document).ready(function () {
        // Handle form submission
        $("#btn-register").on("click", function (e) {
            e.preventDefault(); // Prevent default form submission

            var studentData = {
                Firstname: $("#firstName").val(),
                Lastname: $("#lastName").val(),
                Username: $("#username").val(),
                Address: $("#address").val(),
                ContactNo: $("#phone").val(),
                Email: $("#email").val(),
                Password: $("#password").val(),
                RePassword: $("#rePassword").val()
            };

            // Make AJAX POST request to register the student
            $.ajax({
                url: 'https://localhost:44349/api/Account/RegisterUser',
                type: 'POST',
                contentType: 'application/json', // Sending JSON data
                data: JSON.stringify(studentData), // Converting the form data to JSON string
                success: function (response) {
                    alert("Student registered successfully!");
                    window.location.href = '/Home/Login';
                    // Optionally, reset the form or do other actions
                    $('#registerForm')[0].reset();
                },
                error: function (xhr, status, error) {
                    console.log("Error details:", xhr, status, error); // Log error details for debugging
                    alert("An error occurred: " + xhr.responseText); // Display more specific error message
                }
            });
        });
    });
</script>

